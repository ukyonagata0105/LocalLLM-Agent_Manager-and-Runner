# M06: Voice Transcription è©³ç´°è¨­è¨ˆæ›¸

> **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ID**: M06  
> **Tier**: 3 (Advanced - æ˜ç¤ºçš„ã«æœ‰åŠ¹åŒ–)  
> **ä¾å­˜**: M01, M05  
> **è¿½åŠ è¦ä»¶**: Whisperãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

---

## 1. æ¦‚è¦

éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§æ–‡å­—èµ·ã“ã—ã—ã€æ—¥è¨˜ã‚„ãƒ¡ãƒ¢ã«è‡ªå‹•é€£æºã€‚

---

## 2. åˆ¶é™äº‹é …ï¼ˆgemini-request.mdåæ˜ ï¼‰

| é …ç›® | åˆ¶é™ | ç†ç”± |
|------|------|------|
| **VRAMç®¡ç†** | LLMã¨ã®æ’ä»–åˆ¶å¾¡ï¼ˆåŒæ™‚å®Ÿè¡Œä¸å¯ï¼‰ | VRAMæ¯æ¸‡é˜²æ­¢ |
| **è©±è€…åˆ†é›¢** | åˆæœŸã¯éå¯¾å¿œï¼ˆExperimentalæ‰±ã„ï¼‰ | å®Ÿè£…è¤‡é›‘æ€§ |
| **ãƒ¢ãƒ‡ãƒ«** | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯smallï¼ˆ466MBï¼‰ | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚º |

---

## 3. VRAMæ’ä»–åˆ¶å¾¡

> âš ï¸ **æ”¹å–„**: LLMã¨Whisperã®åŒæ™‚å®Ÿè¡Œã«ã‚ˆã‚‹VRAMæ¯æ¸‡å¯¾ç­–

```typescript
interface ResourceManager {
  // æ’ä»–ãƒ­ãƒƒã‚¯
  acquireGPU(module: 'llm' | 'whisper'): Promise<void>;
  releaseGPU(module: 'llm' | 'whisper'): Promise<void>;
  
  // ç¾åœ¨ã®ãƒ›ãƒ«ãƒ€ãƒ¼
  getCurrentHolder(): 'llm' | 'whisper' | null;
}

// ä½¿ç”¨ä¾‹
async function transcribe(audio: AudioFile) {
  await resourceManager.acquireGPU('whisper');
  try {
    return await whisper.transcribe(audio);
  } finally {
    await resourceManager.releaseGPU('whisper');
  }
}
```

---

## 4. Whisperãƒ¢ãƒ‡ãƒ«

| ãƒ¢ãƒ‡ãƒ« | ã‚µã‚¤ã‚º | æ¨å¥¨ |
|--------|--------|------|
| tiny | 75MB | ãƒ†ã‚¹ãƒˆç”¨ |
| base | 142MB | è»½é‡ç’°å¢ƒ |
| **small** | 466MB | âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
| medium | 1.5GB | é«˜ç²¾åº¦ |
| large-v3 | 3GB | æœ€é«˜ç²¾åº¦ |

---

## 5. æ—¥è¨˜é€£æº

### 5.1 ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º

```typescript
interface AudioMetadata {
  filename: string;
  recordedAt?: Date;  // ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰æ¨å®š
  duration: number;
  format: string;
}
```

### 5.2 æ—¥è¨˜ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°

```typescript
interface DiaryIntegration {
  // éŒ²éŸ³æ—¥ã®æ—¥è¨˜ã«è¿½è¨˜
  appendToEntry(date: Date, transcription: string): Promise<void>;
  
  // æ—¥è¨˜ãƒ‘ã‚¹è¨­å®š
  diaryPath: string;  // ~/Documents/diary/
  filenameFormat: string;  // YYYY-MM-DD.md
}
```

---

## 6. UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éŸ³å£°æ–‡å­—èµ·ã“ã—                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚     ğŸ¤ éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—                         â”‚ â”‚
â”‚  â”‚        (.mp3, .wav, .m4a, .ogg)                      â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  æœ€è¿‘ã®æ–‡å­—èµ·ã“ã—:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“„ meeting_2024-01-20.m4a          â†’ 2024-01-20.md    â”‚â”‚
â”‚  â”‚    ã€Œä»Šæ—¥ã®ä¼šè­°ã§ã¯...ã€ (12:34)                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  ãƒ¢ãƒ‡ãƒ«: [small â–¼]   æ—¥è¨˜é€£æº: [âœ“]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«API

```typescript
export interface VoiceTranscriptionAPI {
  // æ–‡å­—èµ·ã“ã—
  transcribe(audioPath: string): Promise<TranscriptionResult>;
  transcribeBatch(paths: string[]): Promise<TranscriptionResult[]>;
  
  // æ—¥è¨˜é€£æº
  linkToDiary(transcription: TranscriptionResult): Promise<void>;
  
  // ãƒ¢ãƒ‡ãƒ«ç®¡ç†
  downloadModel(model: WhisperModel): Promise<void>;
  getAvailableModels(): WhisperModel[];
}
```

---

## 8. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| æŠ€è¡“ | ç”¨é€” | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ |
|------|------|------------|
| **whisper.cpp** | éŸ³å£°èªè­˜ | MIT |
| **ffmpeg** | éŸ³å£°å¤‰æ› | LGPL |
| **music-metadata** | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º | MIT |

---

*ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.0*
*æœ€çµ‚æ›´æ–°: 2026-01-05*
