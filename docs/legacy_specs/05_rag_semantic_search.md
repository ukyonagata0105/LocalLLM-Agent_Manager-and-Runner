# M05: RAG & Semantic Search è©³ç´°è¨­è¨ˆæ›¸

> **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ID**: M05  
> **Tier**: 2 (Standard - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæœ‰åŠ¹)  
> **ä¾å­˜**: M01, M02  
> **è¢«ä¾å­˜**: M06, M07, M14

---

## 1. æ¦‚è¦

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ RAGã€‚ã‚ªãƒ—ãƒˆã‚¤ãƒ³/ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆé¸æŠå¯èƒ½ã€‚

---

## 2. åˆ¶é™äº‹é …ï¼ˆgemini-request.mdåæ˜ ï¼‰

| é …ç›® | åˆ¶é™ | ç†ç”± |
|------|------|------|
| **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°** | ã‚¢ãƒ—ãƒªèµ·å‹•ä¸­ã®ã¿ã€ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚å„ªå…ˆ | CPUè² è·è»½æ¸› |
| **æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿** | 3æŠUIï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰/æ„å‘³/ãƒãƒ©ãƒ³ã‚¹ï¼‰ | ãƒ¦ãƒ¼ã‚¶ãƒ¼èª¿æ•´ä¸è¦ |
| **åŒæ™‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹** | æœ€å¤§3ãƒ•ã‚¡ã‚¤ãƒ«ä¸¦åˆ— | ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ |

---

## 3. ã‚¤ãƒ³ãƒ‡ã‚­ã‚·ãƒ³ã‚°æ–¹å¼

### 3.1 ã‚ªãƒ—ãƒˆã‚¤ãƒ³ / ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆ

```yaml
indexing:
  mode: opt-in  # ã¾ãŸã¯ opt-out
  
  # opt-in: æŒ‡å®šãƒ•ã‚©ãƒ«ãƒ€ã®ã¿
  include_paths:
    - ~/Documents/research
    - ~/Projects/docs
    
  # opt-out: é™¤å¤–ãƒ‘ã‚¹ä»¥å¤–ã™ã¹ã¦
  base_paths:
    - ~/Documents
  exclude_paths:
    - ~/Documents/private
```

### 3.2 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚°

> âš ï¸ **æ”¹å–„**: å¸¸æ™‚æ›´æ–°ã§ã¯ãªãã‚¢ã‚¤ãƒ‰ãƒ«æ™‚ã®ã¿

```typescript
interface IndexScheduler {
  mode: 'idle' | 'manual' | 'realtime';
  
  // ã‚¢ã‚¤ãƒ‰ãƒ«ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰
  idleConfig: {
    triggerAfterIdleMs: 60000;  // 1åˆ†é–“å…¥åŠ›ãªã—
    pauseOnActivity: true;
  };
}
```

---

## 4. ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢

### 4.1 ç°¡æ˜“UI

> âš ï¸ **æ”¹å–„**: å†…éƒ¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’éš è”½

```
æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰:
(â—) ãƒãƒ©ãƒ³ã‚¹    â† alpha = 0.5
( ) ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é‡è¦– â† alpha = 0.3
( ) æ„å‘³é‡è¦–    â† alpha = 0.7
```

### 4.2 å®Ÿè£…

```typescript
const alphaMap = {
  'keyword': 0.3,
  'balanced': 0.5,
  'semantic': 0.7
};

async function hybridSearch(query: string, mode: SearchMode) {
  const alpha = alphaMap[mode];
  // ...
}
```

---

## 5. ãƒ™ã‚¯ãƒˆãƒ«DB

| DB | ç”¨é€” | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ |
|-----|------|----------|
| **Qdrant** | æœ¬ç•ªï¼ˆé«˜æ€§èƒ½ï¼‰ | Apache 2.0 |
| **LanceDB** | çµ„ã¿è¾¼ã¿ï¼ˆè»½é‡ï¼‰ | Apache 2.0 |

### 5.1 çµ±ä¸€API

```typescript
interface VectorDB {
  upsert(docs: VectorDocument[]): Promise<void>;
  search(query: number[], topK: number): Promise<SearchResult[]>;
  delete(ids: string[]): Promise<void>;
}
```

---

## 6. UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–¹å¼: (â—) ã‚ªãƒ—ãƒˆã‚¤ãƒ³ ( ) ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆ           â”‚
â”‚                                                             â”‚
â”‚ å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€:                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ğŸ“ ~/Documents/research           1,234 docs  [å‰Šé™¤]   â”‚â”‚
â”‚ â”‚ ğŸ“ ~/Projects/my-project/docs       567 docs  [å‰Šé™¤]   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ [+ ãƒ•ã‚©ãƒ«ãƒ€è¿½åŠ ]                                            â”‚
â”‚                                                             â”‚
â”‚ æ›´æ–°ãƒ¢ãƒ¼ãƒ‰: (â—) ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚ ( ) æ‰‹å‹• ( ) ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ         â”‚
â”‚                                                             â”‚
â”‚ æœ€çµ‚æ›´æ–°: 5åˆ†å‰ | ç·ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: 1,801                     â”‚
â”‚                                      [ä»Šã™ãæ›´æ–°]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«API

```typescript
export interface RAGAPI {
  // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  addFolder(path: string): Promise<void>;
  removeFolder(path: string): Promise<void>;
  reindex(): Promise<void>;
  
  // æ¤œç´¢
  search(query: string, options?: SearchOptions): Promise<SearchResult[]>;
  
  // RAG
  generateWithContext(
    query: string, 
    options?: RAGOptions
  ): Promise<RAGResponse>;
}
```

---

## 8. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| æŠ€è¡“ | ç”¨é€” | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ |
|------|------|------------|
| **qdrant-js** | Qdrantã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | Apache 2.0 |
| **lancedb** | çµ„ã¿è¾¼ã¿DB | Apache 2.0 |
| **chokidar** | ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦– | MIT |

---

*ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.0*
*æœ€çµ‚æ›´æ–°: 2026-01-05*
